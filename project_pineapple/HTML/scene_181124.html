<!doctype html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/98/three.min.js"></script>
    <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/controls/OrbitControls.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <script>
        var scene = new THREE.Scene();

        var camera = new THREE.PerspectiveCamera( 45, window.innerWidth/window.innerHeight, 0.1, 1000 );
        camera.position.x = ( 43.299427);
        camera.position.y = ( 5.387963);
        camera.position.z = ( 42.448778 );
        camera.up.set( 0, 0, 1 );

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        const data = [{"faces": "[5,0,1,3,5,1,5,3,4,1,2,3,7,8,9,11,7,9,7,11,6,9,10,11,13,17,12,15,16,17,15,13,14,17,13,15,23,21,22,19,23,22,20,23,19,18,19,22,27,28,29,25,29,24,26,27,25,29,25,27,31,32,33,35,31,33,31,35,30,33,34,35,39,40,41,37,39,41,39,37,38,41,36,37,47,45,46,43,47,46,44,47,43,42,43,46,49,50,51,53,51,52,48,49,53,51,53,49,58,54,55,57,58,55,57,55,59,56,59,55,64,65,63,61,62,65,61,64,60,65,64,61,71,69,70,67,71,70,71,67,68,70,66,67,77,72,73,75,77,73,77,75,76,73,74,75,82,78,79,81,82,79,81,79,83,80,83,79,89,87,88,85,89,88,89,85,86,88,84,85,91,92,95,94,91,95,91,94,90,95,93,94,97,98,99,101,97,99,97,101,96,99,100,101,106,107,105,103,104,107,103,106,102,107,106,103,109,113,108,111,112,113,111,109,110,113,109,111,118,114,115,119,118,115,115,116,119,118,119,117]", "vertices": "[-5.257225,-8.506561,20.0,0.0,-8.506561,20.0,5.257225,-8.506561,20.0,2.628613,-6.881893,24.253281,0.0,-5.257225,28.506561,-2.628613,-6.881893,24.253281,0.0,-5.257225,28.506561,2.628613,-6.881893,24.253281,5.257225,-8.506561,20.0,6.881893,-4.253281,22.628613,8.506561,0.0,25.257225,4.253281,-2.628613,26.881893,0.0,-5.257225,28.506561,4.253281,-2.628613,26.881893,8.506561,0.0,25.257225,4.253281,2.628613,26.881893,0.0,5.257225,28.506561,0.0,0.0,28.506561,0.0,5.257225,28.506561,4.253281,2.628613,26.881893,8.506561,0.0,25.257225,5.257225,8.506561,20.0,2.628613,6.881893,24.253281,6.881893,4.253281,22.628613,0.0,5.257225,28.506561,2.628613,6.881893,24.253281,5.257225,8.506561,20.0,0.0,8.506561,20.0,-5.257225,8.506561,20.0,-2.628613,6.881893,24.253281,0.0,5.257225,28.506561,-2.628613,6.881893,24.253281,-5.257225,8.506561,20.0,-6.881893,4.253281,22.628613,-8.506561,0.0,25.257225,-4.253281,2.628613,26.881893,0.0,-5.257225,28.506561,0.0,0.0,28.506561,0.0,5.257225,28.506561,-4.253281,2.628613,26.881893,-8.506561,0.0,25.257225,-4.253281,-2.628613,26.881893,0.0,-5.257225,28.506561,-4.253281,-2.628613,26.881893,-8.506561,0.0,25.257225,-5.257225,-8.506561,20.0,-2.628613,-6.881893,24.253281,-6.881893,-4.253281,22.628613,5.257225,-8.506561,20.0,0.0,-8.506561,20.0,-5.257225,-8.506561,20.0,-2.628613,-6.881893,15.746719,0.0,-5.257225,11.493439,2.628613,-6.881893,15.746719,5.257225,-8.506561,20.0,2.628613,-6.881893,15.746719,0.0,-5.257225,11.493439,8.506561,0.0,14.742775,6.881893,-4.253281,17.371387,4.253281,-2.628613,13.118107,8.506561,0.0,14.742775,4.253281,-2.628613,13.118107,0.0,-5.257225,11.493439,0.0,5.257225,11.493439,4.253281,2.628613,13.118107,0.0,0.0,11.493439,8.506561,0.0,14.742775,4.253281,2.628613,13.118107,0.0,5.257225,11.493439,5.257225,8.506561,20.0,6.881893,4.253281,17.371387,2.628613,6.881893,15.746719,-5.257225,8.506561,20.0,0.0,8.506561,20.0,5.257225,8.506561,20.0,2.628613,6.881893,15.746719,0.0,5.257225,11.493439,-2.628613,6.881893,15.746719,-5.257225,8.506561,20.0,-2.628613,6.881893,15.746719,0.0,5.257225,11.493439,-8.506561,0.0,14.742775,-6.881893,4.253281,17.371387,-4.253281,2.628613,13.118107,0.0,5.257225,11.493439,0.0,0.0,11.493439,0.0,-5.257225,11.493439,-8.506561,0.0,14.742775,-4.253281,2.628613,13.118107,-4.253281,-2.628613,13.118107,0.0,-5.257225,11.493439,-2.628613,-6.881893,15.746719,-5.257225,-8.506561,20.0,-8.506561,0.0,14.742775,-4.253281,-2.628613,13.118107,-6.881893,-4.253281,17.371387,8.506561,0.0,25.257225,6.881893,-4.253281,22.628613,5.257225,-8.506561,20.0,6.881893,-4.253281,17.371387,8.506561,0.0,14.742775,8.506561,0.0,20.0,5.257225,8.506561,20.0,6.881893,4.253281,22.628613,8.506561,0.0,25.257225,8.506561,0.0,14.742775,6.881893,4.253281,17.371387,8.506561,0.0,20.0,-8.506561,0.0,25.257225,-6.881893,4.253281,22.628613,-5.257225,8.506561,20.0,-6.881893,4.253281,17.371387,-8.506561,0.0,14.742775,-8.506561,0.0,20.0,-5.257225,-8.506561,20.0,-6.881893,-4.253281,22.628613,-8.506561,0.0,25.257225,-8.506561,0.0,14.742775,-6.881893,-4.253281,17.371387,-8.506561,0.0,20.0]", "objColour": "#d94848", "geoName": "LadyBug"},{"faces": "[1,4,6,4,5,6,5,3,6,2,5,4,8,12,11,12,13,11,13,10,11,9,13,12,15,19,18,19,20,18,20,17,18,16,20,19,22,27,26,27,25,26,25,24,26,23,25,27,29,34,32,32,34,33,33,34,31,30,32,33,36,40,39,39,40,41,41,40,38,37,39,41,43,47,46,46,47,48,48,47,45,44,46,48,50,55,53,53,55,54,54,55,52,51,53,54]", "vertices": "[0.0,-10.0,0.0,0.0,-10.0,0.0,10.0,0.0,0.0,0.0,0.0,10.0,5.0,-5.0,0.0,5.0,0.0,5.0,0.0,-5.0,5.0,10.0,0.0,0.0,10.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,10.0,5.0,0.0,5.0,5.0,5.0,0.0,0.0,5.0,5.0,0.0,10.0,0.0,0.0,10.0,0.0,-10.0,0.0,0.0,0.0,0.0,10.0,0.0,5.0,5.0,-5.0,5.0,0.0,-5.0,0.0,5.0,-10.0,0.0,0.0,-10.0,0.0,0.0,0.0,-10.0,0.0,0.0,0.0,10.0,0.0,-5.0,5.0,-5.0,0.0,5.0,-5.0,-5.0,0.0,0.0,-10.0,0.0,0.0,-10.0,0.0,10.0,0.0,0.0,0.0,0.0,-10.0,5.0,-5.0,0.0,5.0,0.0,-5.0,0.0,-5.0,-5.0,10.0,0.0,0.0,10.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,-10.0,5.0,5.0,0.0,5.0,0.0,-5.0,0.0,5.0,-5.0,0.0,10.0,0.0,0.0,10.0,0.0,-10.0,0.0,0.0,0.0,0.0,-10.0,-5.0,5.0,0.0,0.0,5.0,-5.0,-5.0,0.0,-5.0,-10.0,0.0,0.0,-10.0,0.0,0.0,0.0,-10.0,0.0,0.0,0.0,-10.0,-5.0,-5.0,0.0,0.0,-5.0,-5.0,-5.0,0.0,-5.0]", "objColour": "#88b565", "geoName": "LadyBug"}]



        const material = new THREE.MeshStandardMaterial( { side: THREE.DoubleSide, vertexColors: THREE.FaceColors } )

        const object = new THREE.Group();

        function createGroupedArray(arr, chunkSize) {
            var groups = [], i;
            for (i = 0; i < arr.length; i += chunkSize) {
                groups.push(arr.slice(i, i + chunkSize));
            }
            return groups;
        }

        function eachGeoFaces(data) {
            var obj = JSON.parse(data.faces);
            var face = createGroupedArray(obj, 3);

            return face;
        }

        function eachGeoVertices(data) {
            var obj = JSON.parse(data.vertices);
            var vert = createGroupedArray(obj, 3);

            return vert;
        }

        function displayGeo(faceData, vertData, tempGeometry) {
            for (var x = 0; x < faceData.length; x++) {
                var face1 = faceData[x][0];
                var face2 = faceData[x][1];
                var face3 = faceData[x][2];
                // console.log(face1 + "/" + face2 + "/" + face3)
                tempGeometry.faces.push( new THREE.Face3(face1, face2, face3));
            }

            for (var x = 0; x < vertData.length; x++) {
                var vert1 = vertData[x][0];
                var vert2 = vertData[x][1];
                var vert3 = vertData[x][2];
                // console.log(vert1 + "/" + vert2 + "/" + vert3)
                tempGeometry.vertices.push( new THREE.Vector3(vert1, vert2, vert3));
            }

            tempGeometry.computeFaceNormals();

            return tempGeometry;
        }

        function loadDisplayGeom(data, object) {

            for (var i = 0; i < data.length; i++) {

                var singleData = data[i];
            
                var tempGeometry = new THREE.Geometry();

                var name = data[i].geoName;

                var faceData = eachGeoFaces(data[i]);

                var vertData = eachGeoVertices(data[i]);

                var geo = displayGeo(faceData, vertData, tempGeometry);

                var material = new THREE.MeshStandardMaterial( { color: data[i].objColour, side: THREE.DoubleSide })

                // var testObject = new THREE.Mesh(geo, new THREE.MeshNormalMaterial());
                var testObject = new THREE.Mesh(geo, material);

                testObject.name = name;

                object.add(testObject);
            
            }

            return object;
            
        }

        scene.add(loadDisplayGeom(data, object));

        var ambient = new THREE.AmbientLight(0xffffff);
        scene.add(ambient);

        var directionalLight = new THREE.DirectionalLight(0xffffff);
        directionalLight.position.set(0,0,1).normalize();
        scene.add(directionalLight);

        var controls = new THREE.OrbitControls(camera, renderer.domElement);
                
        window.addEventListener( 'resize', onWindowResize, false );

        function onWindowResize(){

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }
        
        var animate = function () {
            
            requestAnimationFrame( animate );
            
            renderer.render( scene, camera );
        };
        animate();
    </script>
  </body>
</html>